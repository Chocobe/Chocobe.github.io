<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/0c7e3e2387401c47-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://image.dongascience.com/Photo/2020/03/5bddba7b6574b95d37b6079c199d7101.jpg" fetchPriority="high"/><link rel="stylesheet" href="/_next/static/css/a25b2153a1f737d7.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-b02554a8ada148b4.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-8e74abf0dcc23692.js" async="" crossorigin=""></script><script src="/_next/static/chunks/472-1310e12cc94020cc.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-b1972c4cdd2be6d3.js" async="" crossorigin=""></script><script src="/_next/static/chunks/576-e34357881554b8d0.js" async=""></script><script src="/_next/static/chunks/396-f6cbb416892bae8c.js" async=""></script><script src="/_next/static/chunks/app/layout-218c757156187b35.js" async=""></script><script src="/_next/static/chunks/08ffe114-360da778f6e05848.js" async=""></script><script src="/_next/static/chunks/48507feb-6de01ca04009bb96.js" async=""></script><script src="/_next/static/chunks/39209d7c-a33d4549f726b4ab.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bcategory%5D/layout-160fdf20eac1a7bb.js" async=""></script><script src="/_next/static/chunks/79-8d323f9931348982.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bcategory%5D/page-f2c3cd475da76482.js" async=""></script><title>Chocobe Blog v2</title><meta name="description" content="Frontend 기술 블로그 입니다."/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script><style data-styled="" data-styled-version="6.1.0">*{margin:0;padding:0;box-sizing:border-box;font-family:"Pretendard Variable",sans-serif;}/*!sc*/
body{width:100vw;height:100vh;overflow:hidden;}/*!sc*/
canvas.webgl{display:block;}/*!sc*/
data-styled.g1[id="sc-global-hsetqa1"]{content:"sc-global-hsetqa1,"}/*!sc*/
.hfFYfc{display:flex;flex-wrap:wrap;gap:20px;}/*!sc*/
.hfFYfc >.navItem{padding:0 8px;color:#222;font-size:16px;line-height:24px;font-weight:500;}/*!sc*/
data-styled.g2[id="sc-fc9e4449-0"]{content:"hfFYfc,"}/*!sc*/
.fiXfoi{position:sticky;top:0;z-index:1;background-color:#E8F3F3;}/*!sc*/
.fiXfoi >.innerWrapper{margin:0 auto;padding:24px 20px 20px;width:100%;max-width:1200px;display:grid;grid-template-columns:repeat(3, 1fr);}/*!sc*/
.fiXfoi >.innerWrapper >.logoLink{display:flex;justify-content:center;align-items:flex-end;gap:4px;}/*!sc*/
.fiXfoi >.innerWrapper >.logoLink >.chocobe{padding:8px 4px 0;color:#fff;font-size:28px;line-height:20px;font-weight:600;background-color:#00AAA1;}/*!sc*/
.fiXfoi >.innerWrapper >.logoLink >.fe-blog{position:relative;color:#222;font-size:16px;line-height:16px;font-weight:600;}/*!sc*/
.fiXfoi >.innerWrapper >.logoLink >.fe-blog::before{content:'';width:4px;height:4px;display:block;position:absolute;bottom:2px;right:-6px;border-radius:50%;background-color:#00AAA1;}/*!sc*/
.fiXfoi >.innerWrapper >.headerActionsWrapper{display:flex;justify-content:flex-end;}/*!sc*/
data-styled.g3[id="sc-2b4c7cfd-0"]{content:"fiXfoi,"}/*!sc*/
.gWzijn{height:0;min-height:100%;}/*!sc*/
data-styled.g4[id="sc-6cb25f84-0"]{content:"gWzijn,"}/*!sc*/
.bVIbHO{width:100%;border-bottom:1px solid #EEEEEE;position:relative;overflow:hidden;cursor:pointer;}/*!sc*/
.bVIbHO:last-child{border-bottom:none;}/*!sc*/
.bVIbHO >.decorator{width:32px;position:absolute;top:0;bottom:100%;left:16px;background-color:#ffffff00;transform-origin:top right;transform:rotateZ(15deg) skewY(-15deg);transition:all 1s ease;}/*!sc*/
.bVIbHO >.inner{padding:10px;width:100%;position:sticky;top:0;left:0;display:flex;align-items:center;gap:8px;}/*!sc*/
.bVIbHO >.inner >.icon{color:#6D6E76;transition:all 1s ease;}/*!sc*/
.bVIbHO >.inner >.displayName{color:#6D6E76;font-size:20px;line-height:30px;font-weight:700;transition:all 1s ease;}/*!sc*/
.bVIbHO:hover >.inner >.icon{color:#333333;}/*!sc*/
.bVIbHO:hover >.inner >.displayName{color:#333333;}/*!sc*/
.bVIbHO.isSelected >.decorator{bottom:-100%;background-color:#FFD050;}/*!sc*/
.bVIbHO.isSelected >.inner >.icon{color:#009189;}/*!sc*/
.bVIbHO.isSelected >.inner >.displayName{color:#009189;}/*!sc*/
data-styled.g5[id="sc-db19d186-0"]{content:"bVIbHO,"}/*!sc*/
.fLooeo{border-right:1px solid #EEEEEE;}/*!sc*/
.fLooeo >.navTitle{padding:20px 10px;font-size:14px;line-height:22px;font-weight:500;text-align:center;}/*!sc*/
.fLooeo >.navList{width:200px;}/*!sc*/
data-styled.g6[id="sc-fa18996f-0"]{content:"fLooeo,"}/*!sc*/
.gwGyTj{display:flex;border-radius:8px;box-shadow:1px 3px 6px 0 rgba(0, 0, 0, 0.2);overflow:hidden;transition:all 0.18s ease;}/*!sc*/
.gwGyTj >.thumbnailWrapper{flex-shrink:0;width:40%;height:auto;position:relative;}/*!sc*/
.gwGyTj >.thumbnailWrapper >.thumbnail{object-fit:cover;object-position:center;}/*!sc*/
.gwGyTj >.cardBody{flex:1;padding:20px 16px;width:100%;position:relative;color:#fff;}/*!sc*/
.gwGyTj >.cardBody >.hoverDecorator{width:50%;height:32px;position:absolute;top:0;right:0;transform:translate(100%, -100%);transition:all 0.18s ease-in-out;background-color:#fdd835;pointer-events:none;}/*!sc*/
.gwGyTj >.cardBody >.hoverDecorator::after{content:'';width:50%;height:50px;display:block;position:absolute;top:8px;right:8px;transform:translate(100%, 100%);transition:all 0.18s ease-in-out;transition-delay:0.09s;background-color:#009189;}/*!sc*/
.gwGyTj >.cardBody >.category{color:#592EA9;font-size:16px;line-height:24px;font-weight:600;}/*!sc*/
.gwGyTj >.cardBody >.title{margin-top:20px;color:#232536;font-size:24px;line-height:30px;font-weight:700;}/*!sc*/
.gwGyTj >.cardBody >.date{margin-top:16px;color:#4C4C4C;font-size:14px;line-height:22px;font-weight:500;}/*!sc*/
.gwGyTj >.cardBody >.description{margin-top:16px;color:#6D6E76;font-size:16px;line-height:24px;font-weight:400;white-space:pre-line;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}/*!sc*/
.gwGyTj >.cardBody >.readMoreLink{margin-top:32px;padding:16px 48px;display:none;color:#fff;font-size:18px;line-height:28px;font-weight:700;background-color:#009189;}/*!sc*/
.gwGyTj:not([data-variant=featured]):hover{box-shadow:3px 6px 12px 0 rgba(0, 0, 0, 0.5);cursor:pointer;}/*!sc*/
.gwGyTj:not([data-variant=featured]):hover >.cardBody >.hoverDecorator{transform:translate(0, 0);}/*!sc*/
.gwGyTj:not([data-variant=featured]):hover >.cardBody >.hoverDecorator::after{transform:translate(0, 0);}/*!sc*/
.gwGyTj[data-variant=featured]{flex-flow:row-reverse;border-radius:0;box-shadow:none;}/*!sc*/
.gwGyTj[data-variant=featured] >.thumbnailWrapper{border-radius:8px;overflow:hidden;}/*!sc*/
.gwGyTj[data-variant=featured] >.cardBody >.hoverDecorator{display:none;}/*!sc*/
.gwGyTj[data-variant=featured] >.cardBody >.title{font-size:36px;line-height:40px;}/*!sc*/
.gwGyTj[data-variant=featured] >.cardBody >.description{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;white-space:pre-line;}/*!sc*/
.gwGyTj[data-variant=featured] >.cardBody >.readMoreLink{display:inline-block;}/*!sc*/
.gwGyTj[data-variant=featured]:hover{box-shadow:none;}/*!sc*/
data-styled.g7[id="sc-ae8c9e8b-0"]{content:"gwGyTj,"}/*!sc*/
.djGJcL >.featuredSection{padding:40px 20px;background-color:#F2F8F7;}/*!sc*/
.djGJcL >.commonSection{padding:20px;}/*!sc*/
data-styled.g8[id="sc-6666d4f0-0"]{content:"djGJcL,"}/*!sc*/
</style></head><body class="__className_7bb6ba"><div class="w-full
            h-full
            overflow-y-scroll
            overflow-x-auto"><header class="sc-2b4c7cfd-0 fiXfoi"><div class="innerWrapper"><nav class="sc-fc9e4449-0 hfFYfc"><a class="navItem" href="/profile">Profile</a><a class="navItem" href="/threejs-practices">Three.js practice</a></nav><a class="logoLink" href="/"><span class="chocobe">Chocobe</span><span class="fe-blog">FE Blog</span></a></div></header><div style="min-height:calc(100% - 72px)" class="sc-6cb25f84-0 gWzijn"><div><div class="w-full
                    flex items-start"><nav class="sc-fa18996f-0 fLooeo shrink-0
                        ml-auto
                        h-[calc(100vh-72px)]
                        sticky top-[72px]
                        overflow-auto
                        max-[600px]:w-0"><div class="navTitle">블로그 카테고리</div><ul class="navList"><li href="/blog/javascript" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M20 4l-2 14.5l-6 2l-6 -2l-2 -14.5z"></path><path d="M7.5 8h3v8l-2 -1"></path><path d="M16.5 8h-2.5a.5 .5 0 0 0 -.5 .5v3a.5 .5 0 0 0 .5 .5h1.423a.5 .5 0 0 1 .495 .57l-.418 2.93l-2 .5"></path></svg><div class="displayName">Javascript</div></div></li><li href="/blog/react" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.306 8.711c-2.602 .723 -4.306 1.926 -4.306 3.289c0 2.21 4.477 4 10 4c.773 0 1.526 -.035 2.248 -.102"></path><path d="M17.692 15.289c2.603 -.722 4.308 -1.926 4.308 -3.289c0 -2.21 -4.477 -4 -10 -4c-.773 0 -1.526 .035 -2.25 .102"></path><path d="M6.305 15.287c-.676 2.615 -.485 4.693 .695 5.373c1.913 1.105 5.703 -1.877 8.464 -6.66c.387 -.67 .733 -1.339 1.036 -2"></path><path d="M17.694 8.716c.677 -2.616 .487 -4.696 -.694 -5.376c-1.913 -1.105 -5.703 1.877 -8.464 6.66c-.387 .67 -.733 1.34 -1.037 2"></path><path d="M12 5.424c-1.925 -1.892 -3.82 -2.766 -5 -2.084c-1.913 1.104 -1.226 5.877 1.536 10.66c.386 .67 .793 1.304 1.212 1.896"></path><path d="M12 18.574c1.926 1.893 3.821 2.768 5 2.086c1.913 -1.104 1.226 -5.877 -1.536 -10.66c-.375 -.65 -.78 -1.283 -1.212 -1.897"></path><path d="M11.5 12.866a1 1 0 1 0 1 -1.732a1 1 0 0 0 -1 1.732z"></path></svg><div class="displayName">React</div></div></li><li href="/blog/nextjs" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 15v-6l7.745 10.65a9 9 0 1 1 2.255 -1.993"></path><path d="M15 12v-3"></path></svg><div class="displayName">Nextjs</div></div></li><li href="/blog/jest" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M22.251 11.82a3.117 3.117 0 0 0-2.328-3.01L22.911 0H8.104L11.1 8.838a3.116 3.116 0 0 0-2.244 2.988c0 1.043.52 1.967 1.313 2.536a8.279 8.279 0 0 1-1.084 1.244 8.14 8.14 0 0 1-2.55 1.647c-.834-.563-1.195-1.556-.869-2.446a3.11 3.11 0 0 0-.91-6.08 3.117 3.117 0 0 0-3.113 3.113c0 .848.347 1.626.903 2.182-.048.097-.097.195-.146.299-.465.959-.993 2.043-1.195 3.259-.403 2.432.257 4.384 1.849 5.489A5.093 5.093 0 0 0 5.999 24c1.827 0 3.682-.917 5.475-1.807 1.279-.632 2.599-1.292 3.898-1.612.48-.118.98-.187 1.508-.264 1.07-.153 2.175-.312 3.168-.89a4.482 4.482 0 0 0 2.182-3.091c.174-.994 0-1.994-.444-2.87.298-.48.465-1.042.465-1.647zm-1.355 0c0 .965-.785 1.75-1.75 1.75a1.753 1.753 0 0 1-1.085-3.126l.007-.007c.056-.042.118-.084.18-.125 0 0 .008 0 .008-.007.028-.014.055-.035.083-.05.007 0 .014-.006.021-.006.028-.014.063-.028.097-.042.035-.014.07-.027.098-.041.007 0 .013-.007.02-.007.028-.007.056-.021.084-.028.007 0 .02-.007.028-.007.034-.007.062-.014.097-.02h.007l.104-.022c.007 0 .02 0 .028-.007.028 0 .055-.007.083-.007h.035c.035 0 .07-.007.111-.007h.09c.028 0 .05 0 .077.007h.014c.055.007.111.014.167.028a1.766 1.766 0 0 1 1.396 1.723zM10.043 1.39h10.93l-2.509 7.4c-.104.02-.208.055-.312.09l-2.64-5.385-2.648 5.35c-.104-.034-.216-.055-.327-.076l-2.494-7.38zm4.968 9.825a3.083 3.083 0 0 0-.938-1.668l1.438-2.904 1.452 2.967c-.43.43-.743.98-.868 1.605H15.01zm-3.481-1.098c.034-.007.062-.014.097-.02h.02c.029-.008.056-.008.084-.015h.028c.028 0 .049-.007.076-.007h.271c.028 0 .049.007.07.007.014 0 .02 0 .035.007.027.007.048.007.076.014.007 0 .014 0 .028.007l.097.02h.007c.028.008.056.015.083.029.007 0 .014.007.028.007.021.007.049.014.07.027.007 0 .014.007.02.007.028.014.056.021.084.035h.007a.374.374 0 0 1 .09.049h.007c.028.014.056.034.084.048.007 0 .007.007.013.007.028.014.05.035.077.049l.007.007c.083.062.16.132.236.201l.007.007a1.747 1.747 0 0 1 .48 1.209 1.752 1.752 0 0 1-3.502 0 1.742 1.742 0 0 1 1.32-1.695zm-6.838-.049c.966 0 1.751.786 1.751 1.751s-.785 1.751-1.75 1.751-1.752-.785-1.752-1.75.786-1.752 1.751-1.752zm16.163 6.025a3.07 3.07 0 0 1-1.508 2.133c-.758.438-1.689.577-2.669.716a17.29 17.29 0 0 0-1.64.291c-1.445.355-2.834 1.05-4.182 1.717-1.724.854-3.35 1.66-4.857 1.66a3.645 3.645 0 0 1-2.154-.688c-1.529-1.056-1.453-3.036-1.272-4.12.167-1.015.632-1.966 1.077-2.877.028-.055.049-.104.077-.16.152.056.312.098.479.126-.264 1.473.486 2.994 1.946 3.745l.264.139.284-.104c1.216-.431 2.342-1.133 3.336-2.071a9.334 9.334 0 0 0 1.445-1.716c.16.027.32.034.48.034a3.117 3.117 0 0 0 3.008-2.327h1.167a3.109 3.109 0 0 0 3.01 2.327c.576 0 1.11-.16 1.57-.43.18.52.236 1.063.139 1.605z"></path></svg><div class="displayName">Jest</div></div></li><li href="/blog/threejs" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 22l-5 -19l19 5.5z"></path><path d="M12.573 17.58l-6.152 -1.576l8.796 -9.466l1.914 6.64"></path><path d="M12.573 17.58l-1.573 -6.58l6.13 2.179"></path><path d="M9.527 4.893l1.473 6.107l-6.31 -1.564z"></path></svg><div class="displayName">Three.js</div></div></li><li href="/blog/llmops" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><path d="M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9v28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5V291.9c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"></path></svg><div class="displayName">LLMOps</div></div></li><li href="/blog/monorepo" class="sc-db19d186-0 bVIbHO"><div class="decorator"></div><div class="inner"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="icon" height="30px" width="30px" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z"></path></svg><div class="displayName">Monrepo</div></div></li></ul></nav><div style="max-width:980px" class="flex-1
                        mr-auto
                        w-full
                        overflow-x-hidden"><div class="sc-6666d4f0-0 djGJcL"><section class="commonSection"><div class="flex flex-col gap-[20px]"><div data-variant="normal" class="sc-ae8c9e8b-0 gwGyTj"><figure class="thumbnailWrapper"><img alt="Yarn workspace 를 사용하여 Monorepo 구성하기" fetchPriority="high" decoding="async" data-nimg="fill" class="thumbnail" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="https://image.dongascience.com/Photo/2020/03/5bddba7b6574b95d37b6079c199d7101.jpg"/></figure><div class="cardBody"><div class="hoverDecorator"></div><div class="category">monorepo</div><div class="title">Yarn workspace 를 사용하여 Monorepo 구성하기</div><div class="date">작성일: </div><div class="description">Monorepo 에 대한 정리와 Yarn workspace 를 사용하여 Monorepo 를 구성합니다.</div><a class="readMoreLink" href="/blog/monorepo/2024-03-10-01">Read More</a></div></div></div></section></div></div></div></div></div></div><script src="/_next/static/chunks/webpack-b02554a8ada148b4.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/0c7e3e2387401c47-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/a25b2153a1f737d7.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I[3728,[],\"\"]\n6:I[9928,[],\"\"]\n7:I[9248,[\"576\",\"static/chunks/576-e34357881554b8d0.js\",\"396\",\"static/chunks/396-f6cbb416892bae8c.js\",\"185\",\"static/chunks/app/layout-218c757156187b35.js\"],\"\"]\n8:I[179,[\"576\",\"static/chunks/576-e34357881554b8d0.js\",\"396\",\"static/chunks/396-f6cbb416892bae8c.js\",\"185\",\"static/chunks/app/layout-218c757156187b35.js\"],\"\"]\n9:I[6962,[\"576\",\"static/chunks/576-e34357881554b8d0.js\",\"396\",\"static/chunks/396-f6cbb416892bae8c.js\",\"185\",\"static/chunks/app/layout-218c757156187b35.js\"],\"\"]\na"])</script><script>self.__next_f.push([1,":I[6954,[],\"\"]\nb:I[7264,[],\"\"]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a25b2153a1f737d7.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"Fq9p6qAcLpsi1HL3CgiUO\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/monorepo\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"category\",\"monorepo\",\"d\"],{\"children\":[\"__PAGE__?{\\\"category\\\":\\\"monorepo\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L5\"],\"globalErrorComponent\":\"$6\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_7bb6ba\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full\\n            h-full\\n            overflow-y-scroll\\n            overflow-x-auto\",\"children\":[\"$\",\"$L7\",null,{\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"$L9\",null,{\"style\":{\"minHeight\":\"calc(100% - 72px)\"},\"children\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[null,\"$Lc\",null],\"segment\":[\"category\",\"monorepo\",\"d\"]},\"styles\":null}],\"segment\":\"blog\"},\"styles\":null}]}]]}]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"d:I[689,[\"281\",\"static/chunks/08ffe114-360da778f6e05848.js\",\"465\",\"static/chunks/48507feb-6de01ca04009bb96.js\",\"306\",\"static/chunks/39209d7c-a33d4549f726b4ab.js\",\"576\",\"static/chunks/576-e34357881554b8d0.js\",\"396\",\"static/chunks/396-f6cbb416892bae8c.js\",\"75\",\"static/chunks/app/blog/%5Bcategory%5D/layout-160fdf20eac1a7bb.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"w-full\\n                    flex items-start\",\"children\":[[\"$\",\"$Ld\",null,{\"className\":\"shrink-0\\n                        ml-auto\\n                        h-[calc(100vh-72px)]\\n                        sticky top-[72px]\\n                        overflow-auto\\n                        max-[600px]:w-0\",\"navTitle\":\"블로그 카테고리\"}],[\"$\",\"div\",null,{\"style\":{\"maxWidth\":\"980px\"},\"className\":\"flex-1\\n                        mr-auto\\n                        w-full\\n                        overflow-x-hidden\",\"children\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"category\",\"monorepo\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Le\",\"$Lf\",null],\"segment\":\"__PAGE__?{\\\"category\\\":\\\"monorepo\\\"}\"},\"styles\":null}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Chocobe Blog v2\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Frontend 기술 블로그 입니다.\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[2317,[\"576\",\"static/chunks/576-e34357881554b8d0.js\",\"396\",\"static/chunks/396-f6cbb416892bae8c.js\",\"79\",\"static/chunks/79-8d323f9931348982.js\",\"254\",\"static/chunks/app/blog/%5Bcategory%5D/page-f2c3cd475da76482.js\"],\"\"]\ne:null\n11:T5119,"])</script><script>self.__next_f.push([1,"---\nid: 1\ntitle: 'Yarn workspace 를 사용하여 Monorepo 구성하기'\ndescription: 'Monorepo 에 대한 정리와 Yarn workspace 를 사용하여 Monorepo 를 구성합니다.'\nthumbnail: https://image.dongascience.com/Photo/2020/03/5bddba7b6574b95d37b6079c199d7101.jpg\n\nfeatured: false\ntags: [\n    'monrepo',\n    'yarn workspace',\n    'javascript',\n]\n\ncreatedAt: '2024-03-10 15:00:00'\nmodifiedHistories: []\n---\n\n# Yarn workspace 를 사용하여 Monorepo 구성하기\n\n저는 AI 학습 데이터 가공 데이터를 만들기 위한 작업도구 개발을 위주로 개발하고 있습니다.\n\n작업도구는 단일 프로젝트로 구현하며 Nextjs 또는 Vite 로 개발하고 있습니다.\n\n개발을 진행하며 몇가지 떠오른 생각이 있었습니다.\n\n* 저작도구의 헤더와 같은 UI 는 모두 동일\n* API 의 BASE_URL 은 바뀌지만, 호출하는 인터페이스는 일반적으로 동일\n* 동일한 Design System 및 UI Component 사용\n\n\u003cbr /\u003e\n\n위와같이 공통영역으로 분리할 수 있는 부분이 떠올랐습니다.\n\n지금까지는 이 부분들을 구현한 Template 프로젝트를 만들고, 새로운 작업도구를 개발할 때 clone 해서 개발하였습니다.\n\n\u003cbr /\u003e\n\n어느날 작업도구의 API 개편이 있었습니다.\n\n기존에 개발했던 모든 작업도구에 일일이 적용하고 배포하는 작업이 발생하였습니다.\n\n\u003cbr /\u003e\n\n이러한 생각이 떠올랐을 때, 어디선가 들어보았던 Monorepo 가 생각났습니다.\n\n* **각각의 프로젝트가 서로 의존하도록 구성할 수 있다!**\n\n\u003cbr /\u003e\n\nMonorepo 에 대해 알아본 결과, 더 많은 것을 할 수 있었고, 더 쾌적한 작업환경을 만들 수 있을 것이란 기대가 생겼습니다.\n\n\u003cbr /\u003e\n\n이번 포스팅에서는 Monorepo 에 대한 개념과, 구성방법에 대해 정리하고자 합니다.\n\n\n\n\u003cbr /\u003e\n\n\n\n## Monorepo 란?\n\n\u003e 참고\n\u003e\n\u003e [Yarn 공식문서](https://classic.yarnpkg.com/blog/2018/02/15/nohoist/)\n\u003e\n\u003e [Naver D2 - 모던 프론트엔드 프로젝트 구성 기법 - 모노레포 도구 편](https://d2.naver.com/helloworld/7553804)\n\u003e\n\u003e [Create a React component library with Vite and Typescript](https://dev.to/nicolaserny/create-a-react-component-library-with-vite-and-typescript-1ih9)\n\n\u003cbr /\u003e\n\nMonrepo 는 **Monolithic Repositories** 의 약어입니다.\n\n기존에는 1개의 저장소가 1개의 프로젝트를 가지는 형식이었다면, Monorepo 는 1개의 저장소가 복수의 프로젝트를 가지는 형태입니다.\n\n\u003cbr /\u003e\n\n이로인해 얻고자 하는 것은 다음과 같습니다.\n\n* 복수의 프로젝트가 공통으로 가지는 코드를 별도의 프로젝트로 분리 및 참조\n* 공통 코드 프로젝트의 변경사항은 참조하는 다른 프로젝트에도 손쉽게 적용\n* 각 프로젝트들이 사용하는 동일한 node_modules 패키지들을 `\u003croot\u003e` node_modules 한곳에만 설치하여 참조 \n\n\n\n\u003cbr /\u003e\n\n만약 CommonUI 프로젝트를 만들면, Web1, Web2 와 같은 다른 프로젝트에서 참조하여 사용할 수 있습니다.\n\n\u003cbr /\u003e\n\nCommonUI, Web1, Web2 가 `React@18.x.x` 버전을 사용한다고 가정해 보겠습니다.\n\n개별 프로젝트라면 `React@18.x.x` 를 각 프로젝트의 node_modules 에 설치하므로, 동일한 `React@18.x.x` 를 3번 설치하게 됩니다.\n\nMonorepo 를 사용하게 되면, `\u003croot\u003e` 의 node_modules 에만 설치하고, CommonUI, Web1, Web2 는 `React@18.x.x` 를 참조해서 사용할 수 있게 됩니다.\n\n즉, 3개의 프로젝트를 yarn install 을 하였을 때, `React@18.x.x` 를 3번 설치하는 것이 아닌, 1번만 설치하게 되는 장점이 생깁니다.\n\n\u003cbr /\u003e\n\n그리고 특정 프로젝트가 `React@17.x.x` 를 사용해야 한다면, **nohoist** 설정을 사용하여, 이 프로젝트의 node_modules 에 `React@17.x.x` 를 별도로 설치하여 사용할 수도 있습니다.\n\n\u003cimg src=\"/markdownAssets/monorepo/2024-03-10-01/2024-03-10-01-01.svg\" alt=\"monorepo\" /\u003e\n\n\n\n\u003cbr /\u003e\n\n\n\n## Monorepo 구성 도구\n\nMonorepo 를 구성하는 툴은 몇가지가 있습니다.\n\n* yarn workspace (yarn v1: classic)\n* yarn workspace + Lerna\n* yarn berry (yarn v2: berry)\n* NX\n* ...\n\n\u003cbr /\u003e\n\n이번 포스팅 시리즈는 **yarn workspace (yarn v1: classic)** 만으로 구성하는 방법에 대해 정리하고자 합니다.\n\n\n\n\u003cbr /\u003e\n\n\n\n## Yarn workspace 를 사용한 Monorepo 구성 작업 흐름\n\nyarn workspace 를 사용한 Monrepo 구성은 다음과 같은 과정을 작업하게 됩니다.\n\n1. Monrepo 디렉토리 만들기\n2. yarn init\n3. `\u003croot\u003e` package.json 에 workspace 설정\n4. `common-ui` Vite 프로젝트 생성\n5. `common-ui` vite.config.ts 라이브러리 프로젝트로 설정\n6. `common-ui` package.json 설정\n7. `ChocobeButton.tsx` 컴포넌트 구현하기\n8. `\u003cweb\u003e` Vite 프로젝트 생성\n9. `\u003cweb\u003e` package.json 설정\n10. `\u003cweb\u003e` 에서 ChocobeButton 사용하기\n\n\n\n\u003cbr /\u003e\n\n\n\n## 1. Monrepo 디렉토리 만들기\n\nMonorepo 를 구성할 디렉토리를 만듭니다.\n\n생성한 디렉토리는 Monorepo 의 `\u003croot\u003e` 로 사용하게 됩니다.\n\n\n\n\u003cbr /\u003e\n\n\n\n## 2. yarn init\n\n터미널에서 `\u003croot\u003e` 경로로 이동한 다음, yarn 프로젝트를 초기화 생성합니다.\n\n```bash\nyarn init -y\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 3. `\u003croot\u003e` package.json 에 workspace 설정\n\n`\u003croot\u003e` package.json 은 Monorepo 구성에 대한 설정을 합니다.\n\n```json title=\"\u003croot\u003e package.json\" showLineNumbers\n{\n    \"name\": \"chocobe-monorepo\",\n    \"version\": \"1.0.0\",\n\n    // Yarn workspace v1 은 `private: true` 를 필수 설정입니다.\n    \"private\": true,\n\n    // Monorepo 에 속한 프로젝트 등록\n    \"workspaces\": {\n        // 의존성(node_modules) 를 개별적으로 사용할 프로젝트 등록\n        \"nohoist\": [],\n        // 공통 의존성(\u003croot\u003e node_modules) 를 사용할 프로젝트 등록\n        \"packages\": []\n    }\n}\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 4. `common-ui` Vite 프로젝트 생성\n\n`common-ui` 프로젝트를 생성해 보겠습니다.\n\n이 프로젝트는 다른 프로젝트에서 사용할 UI Components 만을 개발하는 프로젝트입니다.\n\n즉, 다른 프로젝트의 의존성 패키지로 역할하게 됩니다.\n\n`\u003croot\u003e` 디렉토리에 `packages/common-ui` 디렉토리를 추가합니다.\n\n```bash\nmkdir packages packages/common-ui\n```\n\n```bash\n\u003croot\u003e\n├── package.json\n└── packages\n    └── common-ui\n```\n\n\u003cbr /\u003e\n\n터미널에서 common-ui 로 이동한 후, Vite 프로젝트를 생성합니다.\n\n```bash title=\"common-ui Vite 프로젝트 생성\"\nyarn create vite . --template react-ts\n```\n\ncommon-ui 프로젝트를 생성하면, 다음과 같은 디렉토리 구조를 갖게 됩니다.\n\n```bash title=\"전체 디렉토리 구조\"\n\u003croot\u003e\n├── package.json\n└── packages\n    └── common-ui\n        ├── README.md\n        ├── index.html\n        ├── package.json\n        │   │ # `\u003ccommon-ui\u003e` package.json\n        ├── public\n        │   └── vite.svg\n        ├── src\n        │   ├── App.css\n        │   ├── App.tsx\n        │   ├── assets\n        │   │   └── react.svg\n        │   ├── index.css\n        │   ├── main.tsx\n        │   └── vite-env.d.ts\n        ├── tsconfig.json\n        ├── tsconfig.node.json\n        └── vite.config.ts\n            │ # `\u003ccommon-ui\u003e` vite.config.ts\n```\n\n그리고 `\u003ccommon-ui\u003e` package.json 에서 name 을 수정합니다.\n\n이는 다른 프로젝트에서 `\u003ccommon-ui\u003e` 를 import 할 때의 이름이며, yarn workspace 가 의존성을 찾을 때 사용하는 name 입니다.\n\n```json title=\"\u003ccommon-ui\u003e package.json\"\n{\n    \"name\": \"@chocobe/common-ui\",\n    // ...생략\n}\n```\n\n\u003cbr /\u003e\n\nyarn workspace 를 구성하면, yarn 명령의 대상이 어떤 프로젝트인지 지정해주어야 합니다.\n\n터미널에서 각 프로젝트 경로로 직접 이동하여 yarn 명령을 실행하면, 단일 프로젝트와 동일하게 사용가능하지만, `\u003croot\u003e` 경로에서 특정 프로젝트에 yarn 명령을 실행하기 위한 script 입니다.\n\n`\u003croot\u003e` package.json 에 \"scripts\" 를 추가하겠습니다.\n\n```json title=\"\u003croot\u003e package.json 에 common 명령어 추가\"\n{\n    \"name\": \"chocobe-monorepo\",\n    \"version\": \"1.0.0\",\n    \"scripts\": {\n        // common-ui 프로젝트에 대한 명령을 의미합니다.\n        \"common\": \"yarn workspace @chocobe/common-ui\"\n    },\n    \"private\": true,\n    \"workspaces\": {\n        \"nohoist\": [],\n        \"packages\": []\n    }\n}\n```\n\n`\u003croot\u003e` 경로에서 `\u003ccommon-ui\u003e` 프로젝트에 yarn 명령을 실행할 때, 다음과 같이 사용할 수 있게 됩니다.\n\n```bash title=\"\u003ccommon-ui\u003e 에 lodash 설치 예시\"\nyarn common add lodash\n```\n\n그리고 `common-ui` 를 Monorepo 로 등록해줍니다.\n\n```json title=\"\u003ccommon-ui\u003e 등록하기\"\n{\n    \"name\": \"chocobe-monorepo\",\n    \"version\": \"1.0.0\",\n    \"scripts\": {\n        \"common\": \"yarn workspace @chocobe/common-ui\"\n    },\n    \"private\": true,\n    \"workspaces\": {\n        \"nohoist\": [\n            // `nohoist` 로 등록하게 되면 \u003croot\u003e 의 node_modules 를 사용하지 않고,\n            // 프로젝트 자신 내부의 node_modules 를 사용하게 됩니다.\n            // 즉, 의존성 hoisting 을 하지 않습니다.\n        ],\n        \"packages\": [\n            // `packages/common-ui` 경로를 하나의 package 로 등록합니다.\n            \"packages/common-ui\"\n        ]\n    }\n}\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 5. `common-ui` vite.config.ts 라이브러리 프로젝트로 설정\n\n`common-ui` 프로젝트는 라이브러리 형식으로 빌드가 되어야 합니다.\n\n**vite.config.ts** 에 설정을 추가하여, Library Mode 를 적용해 보겠습니다.\n\n\u003cbr /\u003e\n\nLibrary Mode 빌드 시, `index.d.ts` 를 함께 생성하기 위한 plugin 을 설치합니다.\n\n```bash title=\"vite-plugin-dts 설치\"\nyarn common add -D vite-plugin-dts @types/node\n```\n\n\u003cbr /\u003e\n\nVite 의 Library Mode 로 빌드하기 위해, `vite.config.ts` 를 다음과 같이 설정합니다.\n\n```ts title=\"Library Mode 를 위한 vit.config.ts 설정\" showLineNumbers {3, 9-11}\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\nimport dts from 'vite-plugin-dts';\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n    plugins: [\n        react(),\n        dts({\n            insertTypesEntry: true,\n        }),\n    ],\n})\n```\n\n그리고 `build` 속성에 빌드방식을 설정합니다.\n\n```ts title=\"Library Mode 빌드 설정\" showLineNumbers {15-47}\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\nimport dts from 'vite-plugin-dts';\nimport path from 'node:path';\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n    plugins: [\n        react(),\n        dts({\n            insertTypesEntry: true,\n        }),\n    ],\n\n    build: {\n        // Library Mode 설정\n        lib: {\n            // 빌드 시, 진입점 파일\n            // (아직 만들지 않았지만, 다음 과정에서 생성할 예정입니다.)\n            entry: path.resolve(__dirname, 'src/lib/index.ts'),\n            // 패키지명 (빌드 파일명이나 import 에는 무관)\n            name: 'CommonUI',\n            // 빌드 시, 생성할 파일 형식\n            formats: ['es', 'umd'],\n            // 빌드 시, 실제 생성할 파일명\n            fileName: format =\u003e `common-ui.${format}.js`,\n        },\n        // rollup 번들러 설정\n        rollupOptions: {\n            // 이 라이브러리를 사용하는 프로젝트에서 가져올 의존성\n            // 즉, 빌드 결과에는 제외할 의존성\n            // \u003ccommon-ui\u003e 를 사용하는 라이브러리에 아래의 의존성이 있어야 함\n            external: [\n                'react',\n                'react-dom',\n                'styled-components',\n            ],\n            output: {\n                // UMD 모드에서 \u003ccommon-ui\u003e 를 사용할 때, 전역 변수로 사용할 의존성 바인딩 설정\n                globals: {\n                    'react': 'React',\n                    'react-dom': 'ReactDOM',\n                    'styled-components': 'styled',\n                },\n            },\n        },\n    },\n});\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 6. `common-ui` package.json 설정\n\n위에서 설정한 `vite.config.ts` 는 `\u003ccommon-ui\u003e` 빌드에 대한 설정입니다.\n\n외부 프로젝트에서 `\u003ccommon-ui\u003e` 패키지를 사용할 때, **빌드 결과중 어떤 경로의 파일을 참조하도록 할지 설정** 이 필요합니다.\n\n이 부분은 `\u003ccommon-ui\u003e` package.json 에서 설정할 수 있습니다.\n\n```json title=\"\u003ccommon-ui\u003e package.json 빌드파일의 참조방식 설정\" showLineNumbers {31-53}\n{\n    \"name\": \"@chocobe/common-ui\",\n    \"private\": true,\n    \"version\": \"0.0.0\",\n    \"type\": \"module\",\n    \"scripts\": {\n        \"dev\": \"vite\",\n        \"build\": \"tsc \u0026\u0026 vite build\",\n        \"lint\": \"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0\",\n        \"preview\": \"vite preview\"\n    },\n    \"dependencies\": {\n        \"react\": \"^18.2.0\",\n        \"react-dom\": \"^18.2.0\",\n        \"styled-components\": \"^6.1.8\"\n    },\n    \"devDependencies\": {\n        \"@types/node\": \"^20.11.25\",\n        \"@types/react\": \"^18.2.56\",\n        \"@types/react-dom\": \"^18.2.19\",\n        \"@typescript-eslint/eslint-plugin\": \"^7.0.2\",\n        \"@typescript-eslint/parser\": \"^7.0.2\",\n        \"@vitejs/plugin-react\": \"^4.2.1\",\n        \"eslint\": \"^8.56.0\",\n        \"eslint-plugin-react-hooks\": \"^4.6.0\",\n        \"eslint-plugin-react-refresh\": \"^0.4.5\",\n        \"typescript\": \"^5.2.2\",\n        \"vite\": \"^5.1.4\",\n        \"vite-plugin-dts\": \"^3.7.3\"\n    },\n    // \u003ccommon-ui\u003e 를 사용하는 프로젝트에 요구하는 의존선 버전\n    \"peerDependencies\": {\n        \"react\": \"^18.2.0\",\n        \"react-dom\": \"18.2.0\",\n        \"styled-components\": \"6.1.8\"\n    },\n    // 외부 프로젝트가 \u003ccommon-ui\u003e 를 설치할 때, 포함시킬 디렉토리\n    \"files\": [\n        \"dist\"\n    ],\n    // \u003ccommon-ui\u003e 를 사용할 때, 진입 경로 설정\n    \"main\": \"./dist/common-ui.umd.js\",\n    // ES6 호환 환경(import, export) 에서 \u003ccommon-ui\u003e 를 사요앟 ㄹ때, 진입 경로 설정\n    \"module\": \"./dist/common-ui.es.js\",\n    // \u003ccommon-ui\u003e 의 하위 진입 경로 설정\n    \"exports\": {\n        // 전역 접근 시, 진입 경로\n        \".\": {\n            \"types\": \"./dist/index.d.ts\",\n            \"require\": \"./dist/common-ui.umd.js\",\n            \"import\": \"./dist/common-ui.es.js\"\n        }\n    }\n}\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 7. `ChocobeButton.tsx` 컴포넌트 구현하기\n\n`\u003ccommon-ui\u003e` 에서 제공할 버튼 컴포넌트를 만들어보겠습니다.\n\n구현한 컴포넌트는 `vite.config.ts` 에서 빌드 방식에 설정했던 **src/lib/index.ts** 에서 export 해주어야 외부 프로젝트에서 사용할 수 있게 됩니다.\n\n먼저 아래와 같이 디렉토리를 만들겠습니다.\n\n```bash {7, 13}\n\u003ccommon-ui\u003e\n├── README.md\n├── index.html\n├── package.json\n├── public\n│   └── vite.svg\n├── src\n│   ├── App.css\n│   ├── App.tsx\n│   ├── assets\n│   │   └── react.svg\n│   ├── index.css\n│   ├── lib\n│   ├── main.tsx\n│   └── vite-env.d.ts\n├── tsconfig.json\n├── tsconfig.node.json\n└── vite.config.ts\n```\n\n\u003cbr /\u003e\n\n`\u003ccommon-ui\u003e/src/lib/ChocobeButton.tsx` 파일을 만들고 아래와 같이 구현합니다.\n\n```tsx title=\"\u003ccommon-ui\u003e/src/lib/ChocobeButton.tsx\" showLineNumbers\n// react\nimport {\n    useCallback,\n    PropsWithChildren,\n    memo,\n} from 'react';\n// styled-components\nimport styled from 'styled-components';\n\nconst StyledChocobeButtonRoot = styled.button`\n    padding: 4px 8px;\n\n    color: #fff;\n    font-size: 24px;\n    line-height: 36px;\n    font-weight: 500;\n\n    background-color: #ff1493;\n`;\n\ntype TChocobeButtonProps = PropsWithChildren\u003c{\n    onClick: () =\u003e void;\n}\u003e;\n\nfunction _ChocobeButton(props: TChocobeButtonProps) {\n    const {\n        onClick,\n        children,\n    } = props;\n\n    const _onClick = useCallback(() =\u003e {\n        console.group('_onClick() 호출');\n        onClick();\n        console.groupEnd();\n    }, [onClick]);\n\n    return (\n        \u003cStyledChocobeButtonRoot\n            onClick={_onClick}\u003e\n            {children}\n        \u003c/StyledChocobeButtonRoot\u003e\n    );\n}\n\nconst ChocobeButton = memo(_ChocobeButton) as typeof _ChocobeButton;\nexport default ChocobeButton;\n```\n\n\u003cbr /\u003e\n\n`vite.config.ts` 의 `build.lib.entry` 에 설정한 index.ts 파일을 작성합니다.\n\n```ts title=\"\u003ccommon-ui\u003e/src/lib/index.ts\" showLineNumbers\nexport { default as ChocobeButton } from './ChocobeButton';\n```\n\n\u003cbr /\u003e\n\n이로써 `\u003ccommon-ui\u003e` 패키지는 `\u003cChocobeButton /\u003e` 컴포넌트를 제공하게 되었습니다.\n\n마지막으로 아래의 명령으로 빌드합니다.\n\n```bash\nyarn common build\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 8. `\u003cweb\u003e` Vite 프로젝트 생성\n\n`\u003ccommon-ui\u003e` 패키지를 사용하는 `\u003cweb\u003e` 프로젝트를 생성하겠습니다.\n\n터미널에서 `\u003croot\u003e` 에 아래의 명령을 실행합니다.\n\n```bash title=\"\u003cweb\u003e Vite 프로젝트 생성\"\nyarn create vite packages/web --template react-ts\n```\n\n* 생성 시, project name 은 `@chocobe/web` 으로 변경합니다.\n\n\u003cbr /\u003e\n\n`\u003croot\u003e` package.json 에 `\u003cweb\u003e` 프로젝트도 등록합니다.\n\n```json title=\"\u003croot\u003e package.json 에 \u003cweb\u003e 프로젝트 등록\" showLineNumbers {6, 13}\n{\n    \"name\": \"chocobe-monorepo\",\n    \"version\": \"1.0.0\",\n    \"scripts\": {\n        \"common\": \"yarn workspace @chocobe/common-ui\",\n        \"web\": \"yarn workspace @chocobe/web\"\n    },\n    \"private\": true,\n    \"workspaces\": {\n        \"nohoist\": [],\n        \"packages\": [\n            \"packages/common-ui\",\n            \"packages/web\"\n        ]\n    }\n}\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 9. `\u003cweb\u003e` package.json 설정\n\n`\u003cweb\u003e` package.json 에 `\u003ccommon-ui\u003e` 의존성을 추가하겠습니다.\n\n```json title=\"\u003cweb\u003e package.json 에 \u003ccommon-ui\u003e 의존성 추가\" showLineNumbers {13}\n{\n    \"name\": \"@chocobe/web\",\n    \"private\": true,\n    \"version\": \"0.0.0\",\n    \"type\": \"module\",\n    \"scripts\": {\n        \"dev\": \"vite\",\n        \"build\": \"tsc \u0026\u0026 vite build\",\n        \"lint\": \"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0\",\n        \"preview\": \"vite preview\"\n    },\n    \"dependencies\": {\n        \"@chocobe/common-ui\": \"*\",\n        \"react\": \"^18.2.0\",\n        \"react-dom\": \"^18.2.0\"\n    },\n    \"devDependencies\": {\n        \"@types/react\": \"^18.2.56\",\n        \"@types/react-dom\": \"^18.2.19\",\n        \"@typescript-eslint/eslint-plugin\": \"^7.0.2\",\n        \"@typescript-eslint/parser\": \"^7.0.2\",\n        \"@vitejs/plugin-react\": \"^4.2.1\",\n        \"eslint\": \"^8.56.0\",\n        \"eslint-plugin-react-hooks\": \"^4.6.0\",\n        \"eslint-plugin-react-refresh\": \"^0.4.5\",\n        \"typescript\": \"^5.2.2\",\n        \"vite\": \"^5.1.4\"\n    }\n}\n```\n\n`\u003cweb\u003e` 에도 `styled-components` 를 설치합니다.\n\n```bash title=\"\u003cweb\u003e install\"\nyarn web add styled-components\n```\n\n\n\n\u003cbr /\u003e\n\n\n\n## 10. `\u003cweb\u003e` 에서 `ChocobeButton` 사용하기\n\n드디어 `\u003ccommon-ui\u003e` 를 `\u003cweb\u003e` 에서 사용할 준비가 되었습니다.\n\n`\u003cweb\u003e` 의 App.tsx 에서 ChocobeButton 을 import 하면, 정상적으로 참조할 수 있게됩니다.\n\n```tsx title=\"\u003cweb\u003e App.tsx\" showLineNumbers\n// common-ui\nimport { \n    ChocobeButton,\n} from '@chocobe/common-ui';\n\nfunction App() {\n    return (\n        \u003cdiv style={{\n            width: '100vw',\n            height: '100vh',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }}\u003e\n            \u003cChocobeButton onClick={() =\u003e {\n                console.log('여기는 Web 프로젝트입니다.');\n            }}\u003e\n                Hello Web Project\n            \u003c/ChocobeButton\u003e\n        \u003c/div\u003e\n    );\n}\n\nexport default App;\n```\n\n\u003cimg src=\"/markdownAssets/monorepo/2024-03-10-01/2024-03-10-01-02.png\" alt=\"결과\" /\u003e\n\n\n\n\u003cbr /\u003e\n\n\n\n## 마치며\n\nYarn workspace 만을 사용하여 Monorepo 를 구성해 보았습니다.\n\n`\u003croo\u003e` node_modules 의 의존성을 하위 패키지들이 참조하기 위해 Symlink 를 사용하는 등, 이번 포스팅에서 언급하지 않은 개념들이 있습니다.\n\n생략한 개념들은 Yarn Berry 포스팅에서 함께 다루면 좋을 것 같습니다.\n\n\u003cbr /\u003e\n\n주니어 frontend 개발자라는 생각이 지배적이었을 때는, 페이지를 만들고 컴포넌트를 만드는 것에만 관심이 있었습니다.\n\n이제는 미들급이라는 생각이 드는 순간, 작업 효율을 위한 환경 구성에 관심이 생기기 시작하였습니다.\n\n현재는 스터디 수준이지만, 차후 거대한 Monorepo 등, 고도화된 개발 환경을 받아들이기 위한 준비가 될 것 같습니다.\n"])</script><script>self.__next_f.push([1,"f:[\"$\",\"$L10\",null,{\"featuredMarkdownFileDataList\":[],\"commonMarkdownFileDataList\":[{\"category\":\"monorepo\",\"slug\":\"2024-03-10-01\",\"href\":\"/blog/monorepo/2024-03-10-01\",\"frontmatter\":{\"id\":1,\"title\":\"Yarn workspace 를 사용하여 Monorepo 구성하기\",\"description\":\"Monorepo 에 대한 정리와 Yarn workspace 를 사용하여 Monorepo 를 구성합니다.\",\"thumbnail\":\"https://image.dongascience.com/Photo/2020/03/5bddba7b6574b95d37b6079c199d7101.jpg\",\"featured\":false,\"tags\":[\"monrepo\",\"yarn workspace\",\"javascript\"],\"createdAt\":\"$D2024-03-10T15:00:00.000Z\",\"modifiedHistories\":[]},\"markdownFile\":\"$11\"}]}]\n"])</script><script>self.__next_f.push([1,""])</script></body></html><style data-styled="" data-styled-version="6.1.0"></style>