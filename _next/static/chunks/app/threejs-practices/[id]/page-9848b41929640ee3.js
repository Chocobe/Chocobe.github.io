(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{4143:function(e,t,r){Promise.resolve().then(r.bind(r,6648)),Promise.resolve().then(r.bind(r,4419))},6648:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return GalaxyGenerator_GalaxyGenerator}});var a=r(230),s=r(7437),o=r(6375),i=r(3229),n=r(4112),h=r(4554);let GalaxyParticle=class GalaxyParticle{_createGeometry(){let{count:e,branch:t,maxRadius:r,spin:a,spread:s,spreadPower:i,innerColor:n,outerColor:h}=this.config,l=new Float32Array(3*e),c=new Float32Array(3*e),_=new o.Ilk(n),d=new o.Ilk(h);for(let o=0;o<e;o++){let e=3*o,n=2*Math.PI*(o%t)/t,h=Math.random()*r,u=h*a,p=Math.pow(Math.random(),i)*(Math.random()>.5?1:-1)*(h*s),g=Math.pow(Math.random(),i)*(Math.random()>.5?1:-1)*(h*s),m=Math.pow(Math.random(),i)*(Math.random()>.5?1:-1)*(h*s);l[e]=Math.cos(n+u)*h+p,l[e+1]=g,l[e+2]=Math.sin(n+u)*h+m;let f=_.clone();f.lerp(d,h/r),c[e]=f.r,c[e+1]=f.g,c[e+2]=f.b}let u=new o.u9r;return u.setAttribute("position",new o.TlE(l,3)),u.setAttribute("color",new o.TlE(c,3)),u}_createMaterial(){let e=this.config.size,t=new o.UY4({size:e,vertexColors:!0});return t}generateGalaxy(){console.log("generateGalaxy()");let{_mesh:e}=this;if(e){var t,r;null===(t=e.geometry)||void 0===t||t.dispose(),null===(r=e.material)||void 0===r||r.dispose()}let a=this._createGeometry(),s=this._createMaterial(),i=new o.woe(a,s);return this._mesh=i,i}dispose(){let{geometry:e,material:t}=this._mesh;null==e||e.dispose(),null==t||t.dispose()}get particle(){return this._mesh}constructor(){this.config={size:.01,count:5e4,branch:3,maxRadius:5,spin:1,spread:.3,spreadPower:5,innerColor:"#415695",outerColor:"#b24ec6"},this._mesh=this.generateGalaxy()}};let GalaxyGeneratorWebGL=class GalaxyGeneratorWebGL extends i.Z{_createGUI(){let e=new h.ZP({container:this._$parent,injectStyles:!0}),{_scene:t,_particle:r}=this,a=e.addFolder("Helper");a.add(this._config.helper,"showAxes").onChange(()=>{let{showAxes:e}=this._config.helper;this._axesHelper.visible=e});let s=e.addFolder("Controls");s.add(this._config.controls,"autoRotate").onChange(()=>{let{autoRotate:e}=this._config.controls;this._controls.autoRotate=e});let o=e.addFolder("Particle");return o.add(r.config,"count").min(100).max(1e5).step(100).onFinishChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.add(r.config,"branch").min(2).max(10).step(1).onFinishChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.add(r.config,"maxRadius").min(1).max(10).step(1e-4).onFinishChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.add(r.config,"spin").min(0).max(2).step(1e-4).onFinishChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.add(r.config,"spread").min(0).max(1).step(1e-4).onFinishChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.add(r.config,"spreadPower").min(1).max(10).step(1e-4).onFinishChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.addColor(r.config,"innerColor").onChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),o.addColor(r.config,"outerColor").onChange(()=>{t.remove(r.particle),r.generateGalaxy(),t.add(r.particle)}),e}tick(){window.requestAnimationFrame(this.tick.bind(this)),this._controls.update(),this._renderer.render(this._scene,this._camera)}run(){this.tick()}dispose(){}constructor(e){super(e),this._config={...super._createInitialBaseConfig(),helper:{showAxes:!1},controls:{autoRotate:!0}};let{size:{width:t,height:r}}=this._config;this._scene=new o.xsS;let a=new o.cPb;a.fov=45,a.aspect=t/r,a.position.set(-5,7,10),a.lookAt(0,0,0),a.updateProjectionMatrix(),this._camera=a,this._axesHelper=new o.y8_(3),this._axesHelper.visible=this._config.helper.showAxes,this._scene.add(this._axesHelper),this._controls=new n.z(a,e),this._controls.enableDamping=!0,this._controls.autoRotate=this._config.controls.autoRotate,this._particle=new GalaxyParticle,this._scene.add(this._particle.particle),this._gui=this._createGUI();let s=new o.CP7({canvas:e});s.pixelRatio=Math.min(window.devicePixelRatio,2),s.setSize(t,r),this._renderer=s}};var l=r(5406),c=r(802);function _templateObject(){let e=(0,a._)(["\n    width: 100%;\n    height: 100%;\n\n    position: relative;\n\n    .GalaxyGenerator {\n        width: 100%;\n        height: 100%;\n\n        position: absolute;\n        top: 0;\n        left: 0;\n\n        .lil-gui.root {\n            position: absolute;\n            top: 0;\n            right: 0;\n        }\n    }\n"]);return _templateObject=function(){return e},e}let _=c.ZP.div.withConfig({componentId:"sc-acec1a19-0"})(_templateObject());var GalaxyGenerator_GalaxyGenerator=function(){return(0,s.jsx)(_,{children:(0,s.jsx)(l.Z,{className:"GalaxyGenerator",WebGL:GalaxyGeneratorWebGL})})}},4419:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return HauntedHouse_HauntedHouse}});var a=r(7437),s=r(3229),o=r(6375),i=r(4112),n=r(1745);let MainLight=class MainLight{_createAmbientLight(){let e=new o.Mig("#fff",.5);return e}_createDirectionalLight(){let e=new o.Ox3("#fff",3);return e.position.set(3,4,-10),e.castShadow=!0,e.shadow.camera.near=1,e.shadow.camera.far=20,e.shadow.camera.top=4,e.shadow.camera.right=9,e.shadow.camera.bottom=-4,e.shadow.camera.left=-9,e}get ambientLight(){return this._ambientLight}get directionalLight(){return this._directionalLight}constructor(){this._ambientLight=this._createAmbientLight(),this._directionalLight=this._createDirectionalLight()}};let Floor=class Floor{_createFloor(e){let t=new o._12(20,20,100,100),r=new o.Wid({transparent:!0,alphaMap:e.load("/threejs-practices/textures/textures/floor/floor_alpha.jpg"),map:e.load("/threejs-practices/textures/textures/floor/stony_dirt_path_1k/floor_diff_1k.jpg",e=>{e.colorSpace=o.KI_}),aoMap:e.load("/threejs-practices/textures/textures/floor/stony_dirt_path_1k/floor_arm_1k.jpg"),roughnessMap:e.load("/threejs-practices/textures/textures/floor/stony_dirt_path_1k/floor_arm_1k.jpg"),metalnessMap:e.load("/threejs-practices/textures/textures/floor/stony_dirt_path_1k/floor_arm_1k.jpg"),normalMap:e.load("/threejs-practices/textures/textures/floor/stony_dirt_path_1k/floor_nor_gl_1k.jpg"),displacementMap:e.load("/threejs-practices/textures/textures/floor/stony_dirt_path_1k/floor_disp_1k.jpg"),displacementScale:.5,displacementBias:-.25}),a=new o.Kj0(t,r);return a.receiveShadow=!0,a.rotation.x-=.5*Math.PI,a}get mesh(){return this._mesh}constructor(e){this._mesh=this._createFloor(e)}};let House=class House{_initWall(e){let t=new o.DvJ(4,2.5,4),r=new o.Wid({map:e.load("/threejs-practices/textures/textures/wall/rough_block_wall_1k/wall_diff_1k.jpg",this._onLoadColorTexture),aoMap:e.load("/threejs-practices/textures/textures/wall/rough_block_wall_1k/wall_arm_1k.jpg"),roughnessMap:e.load("/threejs-practices/textures/textures/wall/rough_block_wall_1k/wall_arm_1k.jpg"),metalnessMap:e.load("/threejs-practices/textures/textures/wall/rough_block_wall_1k/wall_arm_1k.jpg"),normalMap:e.load("/threejs-practices/textures/textures/wall/rough_block_wall_1k/wall_nor_gl_1k.jpg")}),a=new o.Kj0(t,r);a.castShadow=!0,a.receiveShadow=!0,this._group.add(a)}_initRoof(e){let t=new o.b_z(4,1.5,4),r=new o.Wid({color:"#6c5343",map:e.load("/threejs-practices/textures/textures/roof/clay_roof_tiles_03_1k/roof_diff_1k.jpg",e=>{this._onLoadColorTexture(e),this._onLoadRoofTexture(e)}),aoMap:e.load("/threejs-practices/textures/textures/roof/clay_roof_tiles_03_1k/roof_arm_1k.jpg",this._onLoadRoofTexture),roughnessMap:e.load("/threejs-practices/textures/textures/roof/clay_roof_tiles_03_1k/roof_arm_1k.jpg",this._onLoadRoofTexture),metalnessMap:e.load("/threejs-practices/textures/textures/roof/clay_roof_tiles_03_1k/roof_arm_1k.jpg",this._onLoadRoofTexture),normalMap:e.load("/threejs-practices/textures/textures/roof/clay_roof_tiles_03_1k/roof_nor_gl_1k.jpg",this._onLoadRoofTexture)}),a=new o.Kj0(t,r);a.castShadow=!0,a.position.set(0,2,0),a.rotation.y=.25*Math.PI,this._group.add(a)}_initDoor(e){let t=new o._12(2.5,2.5,100,100),r=new o.Wid({transparent:!0,alphaMap:e.load("/threejs-practices/textures/textures/door/door_alpha.jpg"),map:e.load("/threejs-practices/textures/textures/door/door_color.jpg",this._onLoadColorTexture),aoMap:e.load("/threejs-practices/textures/textures/door/door_ambientOcclusion.jpg"),roughnessMap:e.load("/threejs-practices/textures/textures/door/door_ambientOcclusion.jpg"),metalnessMap:e.load("/threejs-practices/textures/textures/door/door_metalness.jpg"),normalMap:e.load("/threejs-practices/textures/textures/door/door_normal.jpg"),displacementMap:e.load("/threejs-practices/textures/textures/door/door_height.jpg"),displacementScale:.1,displacementBias:-.02}),a=new o.Kj0(t,r);a.receiveShadow=!0,a.position.set(0,-.1,2.0001),this._group.add(a)}_createDoorLight(){let e=new o.cek("#fffe40",5);e.castShadow=!0,e.position.set(0,1.2,2.2),this._group.add(e)}_onLoadColorTexture(e){e.colorSpace=o.KI_}_onLoadRoofTexture(e){e.repeat.x=2.5,e.repeat.y=2.5,e.wrapS=o.rpg,e.wrapT=o.rpg}get mesh(){return this._group}constructor(e){this._group=new o.ZAu,this._initWall(e),this._initRoof(e),this._initDoor(e),this._createDoorLight()}};let Graves=class Graves{_createGeometry(){return new o.DvJ(.5,1,.25)}_createMaterial(e){return new o.Wid({map:e.load("/threejs-practices/textures/textures/grave/lichen_rock_1k/grave_diff_1k.jpg",e=>{e.colorSpace=o.KI_}),aoMap:e.load("/threejs-practices/textures/textures/grave/lichen_rock_1k/grave_arm_1k.jpg"),roughnessMap:e.load("/threejs-practices/textures/textures/grave/lichen_rock_1k/grave_arm_1k.jpg"),metalnessMap:e.load("/threejs-practices/textures/textures/grave/lichen_rock_1k/grave_arm_1k.jpg"),normalMap:e.load("/threejs-practices/textures/textures/grave/lichen_rock_1k/grave_nor_gl_1k.jpg")})}_createGraves(){let e=new o.ZAu;return Array.from({length:this._config.numOfGraves},()=>{let t=this._createGraveMesh();e.add(t)}),e}_createGraveMesh(){let{minBoundaryRadius:e,maxBoundaryRadius:t,geometry:r,material:a}=this._config,s=e+Math.random()*(t-e),i=2*Math.PI*Math.random(),n=new o.Kj0(r,a);return n.castShadow=!0,n.receiveShadow=!0,n.position.x=Math.cos(i)*s,n.position.y=.5*Math.random(),n.position.z=Math.sin(i)*s,n.rotation.x=Math.PI*(10/180)*(2*Math.random()-1),n}get mesh(){return this._group}constructor(e){this._config={numOfGraves:30,minBoundaryRadius:5,maxBoundaryRadius:8,geometry:null,material:null},this._textureLoader=e,this._config.geometry=this._createGeometry(),this._config.material=this._createMaterial(e),this._group=this._createGraves()}};var h=r(9465);let SkyEnvironment=class SkyEnvironment{get mesh(){return this._mesh}constructor(){let e=new h.q;e.scale.setScalar(45e4);let t=o.M8C.degToRad(90),r=o.M8C.degToRad(180),a=new o.Pa4().setFromSphericalCoords(1,t,r);e.material.uniforms.sunPosition.value=a,this._mesh=e}};let Ghosts=class Ghosts{_createGhosts(){let e=new o.ZAu;return e.add(this._createGhost1()),e.add(this._createGhost2()),e.add(this._createGhost3()),e}_createGhost1(){let e=new o.cek("#ff1493",7);return e.name="ghost1",e.castShadow=!0,e}_createGhost2(){let e=new o.cek("#03a9f4",7);return e.name="ghost2",e.castShadow=!0,e}_createGhost3(){let e=new o.cek("#00ff00",7);return e.name="ghost3",e.castShadow=!0,e}animateGhosts(e){let t=.5*e;this.ghost1.position.x=5*Math.cos(t),this.ghost1.position.y=Math.sin(t)*Math.sin(2.34*t)+.5,this.ghost1.position.z=5*Math.sin(t);let r=-.5*e;this.ghost2.position.x=6*Math.cos(r),this.ghost2.position.y=Math.sin(r)*Math.sin(5.5*r),this.ghost2.position.z=6*Math.sin(r);let a=.3*e;this.ghost3.position.x=7*Math.cos(a),this.ghost3.position.y=Math.sin(a)*Math.sin(a),this.ghost3.position.z=7*Math.sin(a)}get mesh(){return this._group}get ghost1(){return this._group.getObjectByName("ghost1")}get ghost2(){return this._group.getObjectByName("ghost2")}get ghost3(){return this._group.getObjectByName("ghost3")}constructor(){this._group=this._createGhosts()}};let HauntedHouseWegGL=class HauntedHouseWegGL extends s.Z{_resize(){let{_renderer:e,_camera:t}=this;this._config.resizeTimeoutID&&window.clearTimeout(this._config.resizeTimeoutID),this._config.resizeTimeoutID=setTimeout(()=>{let{width:r,height:a}=this._getSize();e.pixelRatio=Math.min(window.devicePixelRatio,2),e.setSize(r,a),t.aspect=r/a,t.updateProjectionMatrix(),this._config.resizeTimeoutID=null},500)}_initResize(){window.addEventListener("resize",this._resize.bind(this))}_createMainLight(){let e=new MainLight;return this._scene.add(e.ambientLight),this._scene.add(e.directionalLight),e}_createFloor(){let e=new Floor(this._textureLoader);return this._scene.add(e.mesh),e}_createHouse(){let e=new House(this._textureLoader);return e.mesh.position.set(0,1.25,0),this._scene.add(e.mesh),e}_createGraves(){let e=new Graves(this._textureLoader);return this._scene.add(e.mesh),e}_createSkyEnvironment(){let e=new SkyEnvironment;return this._scene.add(e.mesh),e}_createGhosts(){let e=new Ghosts;return this._scene.add(e.mesh),e}tick(){window.requestAnimationFrame(this.tick.bind(this));let e=this._timer.getElapsed();this._ghosts.animateGhosts(e),this._timer.update(),this._controls.update(),this._renderer.render(this._scene,this._camera)}run(){this.tick()}dispose(){window.removeEventListener("resize",this._initResize)}constructor(e){super(e),this._config=this._createInitialBaseConfig();let{size:{width:t,height:r}}=this._config;this._scene=new o.xsS,this._scene.background=new o.Ilk("#000");let a=new o.cPb;a.fov=45,a.aspect=t/r,a.near=1,a.far=2e3,a.position.set(7,5,15),a.lookAt(0,0,0),a.updateProjectionMatrix(),this._camera=a;let s=new i.z(a,e);s.enableDamping=!0,this._controls=s,this._timer=new n.B;let h=new o.CP7({canvas:e});h.pixelRatio=Math.min(window.devicePixelRatio,2),h.setSize(t,r),h.shadowMap.enabled=!0,this._renderer=h,this._initResize(),this._textureLoader=new o.dpR,this._mainLight=this._createMainLight(),this._floor=this._createFloor(),this._house=this._createHouse(),this._graves=this._createGraves(),this._skyEnvironment=this._createSkyEnvironment(),this._ghosts=this._createGhosts()}};var l=r(5406),HauntedHouse_HauntedHouse=function(){return(0,a.jsx)(l.Z,{WebGL:HauntedHouseWegGL})}},3229:function(e,t){"use strict";let BaseWebGL=class BaseWebGL{_getSize(){let{width:e,height:t}=this._$parent.getBoundingClientRect();return{width:e,height:t}}_createInitialBaseConfig(){let{width:e,height:t}=this._getSize();return{size:{width:e,height:t},resizeTimeoutID:null}}constructor(e){if(!(null==e?void 0:e.parentElement))throw Error("Can not access parentElement");this._$parent=e.parentElement,this._$canvas=e}};t.Z=BaseWebGL},5406:function(e,t,r){"use strict";var a=r(230),s=r(7437),o=r(2265),i=r(802);function _templateObject(){let e=(0,a._)(["\n    width: 100%;\n    height: 100%;\n\n    overflow: ",";\n"]);return _templateObject=function(){return e},e}let n=i.ZP.div.withConfig({componentId:"sc-516964f4-0"})(_templateObject(),e=>{let{$overflow:t}=e;return t});function ThreejsPracticesPageTemplate(e){let{className:t,overflow:r="hidden",WebGL:a}=e,i=(0,o.useRef)(null),h=(0,o.useRef)(null);return(0,o.useEffect)(function(){return i.current&&(console.log("Template 초기화"),h.current=new a(i.current),h.current.run()),()=>{var e;console.log("Template 클린업"),null===(e=h.current)||void 0===e||e.dispose(),h.current=null}},[a]),(0,s.jsx)(n,{className:t,$overflow:r,children:(0,s.jsx)("canvas",{ref:i})})}t.Z=ThreejsPracticesPageTemplate}},function(e){e.O(0,[689,576,589,971,472,744],function(){return e(e.s=4143)}),_N_E=e.O()}]);